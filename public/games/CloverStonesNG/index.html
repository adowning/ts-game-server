<html>
  <head>
    <meta charset="UTF-8" />
    <base href="/games/CloverStonesNG/app/cloverstones.7/" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="robots" content="noindex, nofollow" />
    <title>{{$game->title}}</title>
    <script
      type="text/javascript"
      src="index.js?6fb2e03a5abed8994180"
      nonce="MjIxODY2MDQ0Nyw0MDE4MDAyMTI3"
    ></script>
  </head>
  <script nonce="MjIxODY2MDQ0Nyw0MDE4MDAyMTI3">
    ;(async () => {
      // if (!sessionStorage.getItem('sessionId')) {
      // const rawResponse = await fetch(
      //   'https://api.ashdevtools.com/login',
      //   {
      //     method: 'POST',
      //     headers: {
      //       Accept: 'application/json',
      //       'Content-Type': 'application/json'
      //     },
      //     body: JSON.stringify({
      //       email: 'garage456@protonmail.com',
      //       password: 'R92qHVhz4xULVt3WJ3l5CqeFOf22'
      //     })
      //   }
      // )
      // const content = await rawResponse.json()
      // var token = content.token

      // console.log(content)
      const token = 'fakeToken'
      sessionStorage.setItem('sessionId', token)
      // }

      var qstr =
        '/?launcher=true&sfx_164963735=1613392660893&commonVersion=(build%2085)&game=190&userId=798626506653&wshost=&quality=high&lang=en&noframe=yes'

      var uparts = document.location.href.split('?')
      var exitUrl = ''
      if (document.location.href.split('?')[1] == undefined) {
        document.location.href = document.location.href + qstr
      } else if (document.location.href.split('?api_exit')[1] != undefined) {
        document.location.href = uparts[0] + qstr + '&' + uparts[1]
      }
      var exitUrl = ''
      if (document.location.href.split('api_exit=')[1] != undefined) {
        exitUrl = document.location.href.split('api_exit=')[1].split('&')[0]
      }
      addEventListener('message', function (ev) {
        if (ev.data == 'CloseGame') {
          var isFramed = false
          try {
            isFramed =
              window != window.top || document != top.document || self.location != top.location
          } catch (e) {
            isFramed = true
          }

          if (isFramed) {
            window.parent.postMessage('CloseGame', '*')
          }
          document.location.href = exitUrl
        }
      })
    })()
  </script>

  <body>
    <script nonce="MjIxODY2MDQ0Nyw0MDE4MDAyMTI3">
      ;(function () {
        var a = document.createElement('script')
        a.setAttribute('type', 'text/javascript')
        a.setAttribute('src', '../../js/loader.js?r=' + Math.random())
        'undefined' !== typeof a && document.getElementsByTagName('head')[0].appendChild(a)
      })()
    </script>
  </body>
  <script
    rel="javascript"
    type="text/javascript"
    src="/games/CloverStonesNG/device.js"
    nonce="MjIxODY2MDQ0Nyw0MDE4MDAyMTI3"
  ></script>
  <script
    rel="javascript"
    type="text/javascript"
    src="/games/CloverStonesNG/addon.js"
    nonce="MjIxODY2MDQ0Nyw0MDE4MDAyMTI3"
  ></script>
</html>
